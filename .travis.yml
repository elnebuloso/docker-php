language: minimal

branches:
  only:
    - master

services:
  - docker

script:
  - docker build --pull --tag foooooo --build-arg PHP_VERSION=7.3 --file release/ubuntu/apache/Dockerfile .
  - docker run -i --rm -v /var/run/docker.sock:/var/run/docker.sock -v ${pwd}:/app zemanlx/container-structure-test:v1.7.0-alpine test --image foooooo --config /app/release/ubuntu/all/tests/structure.yaml